{"version":3,"file":"index.js","sources":["../../src/node/generateIndex.ts","../../src/node/utils.ts","../../src/node/generateWorker.ts","../../src/node/locales.ts","../../src/node/pathStore.ts","../../src/node/prepare.ts","../../src/node/setPagesExcerpt.ts","../../src/node/slimsearchPlugin.ts","../../src/shared/data.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unsafe-enum-comparison */\nimport { entries, fromEntries, isArray, keys } from '@vuepress/helper'\nimport { load } from 'cheerio'\nimport type { AnyNode, Element } from 'domhandler'\nimport { addAllAsync, createIndex } from 'slimsearch'\nimport type { App, Page } from 'vuepress/core'\n\nimport type {\n  IndexItem,\n  LocaleIndex,\n  PageIndexId,\n  PageIndexItem,\n  SearchIndexStore,\n  SectionIndexItem,\n} from '../shared/index.js'\nimport type { CustomFieldOptions, SlimSearchPluginOptions } from './options.js'\nimport type { PathStore } from './pathStore.js'\n\n/**\n * These tags are valid HTML tags which can contain content.\n */\n\n/**\n * @description h1 is removed because it's the title of the page.\n */\nconst HEADING_TAGS = 'h2,h3,h4,h5,h6'.split(',')\n\n/**\n * @description Not all the block tags are included, because some of them shall not be indexed\n */\nconst CONTENT_BLOCK_TAGS =\n  'header,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,li,main,ol,p,ul,caption,table,thead,tbody,tfoot,th,tr,td,datalist,fieldset,form,legend,optgroup,option,select,details,dialog,menu,menuitem,summary,blockquote,pre'.split(\n    ',',\n  )\n\n/**\n * @description Not all the inline tags are included, because some of them shall not be indexed\n *\n * routelink and routerlink are added to the list, because they are link components\n */\nconst CONTENT_INLINE_TAGS =\n  'routelink,routerlink,a,b,abbr,bdi,bdo,cite,code,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,del,ins,button,label,legend,meter,optgroup,option,output,progress,select'.split(\n    ',',\n  )\n\nconst isExcerptMarker = (node: AnyNode): boolean =>\n  node.type === 'comment' && node.data.trim() === 'more'\n\nconst $ = load('')\n\nconst renderHeader = (node: Element): string => {\n  if (\n    node.children.length === 1 &&\n    node.children[0].type === 'tag' &&\n    node.children[0].tagName === 'a' &&\n    node.children[0].attribs.class === 'header-anchor'\n  )\n    node.children = (node.children[0].children[0] as Element).children\n\n  return node.children\n    .map((childNode) => (childNode.type === 'text' ? childNode.data : null))\n    .filter(Boolean)\n    .join(' ')\n    .replace(/\\s+/gu, ' ')\n    .trim()\n}\n\nexport const generatePageIndex = (\n  page: Page<{ excerpt?: string }>,\n  store: PathStore,\n  customFieldsGetter: CustomFieldOptions[] = [],\n  indexContent = false,\n): IndexItem[] => {\n  const { contentRendered, data, title } = page\n  const pageId = store.addPath(page.path).toString() as PageIndexId\n  const hasExcerpt = Boolean(data.excerpt?.length)\n\n  const pageIndex: PageIndexItem = { id: pageId, h: title }\n  const results: IndexItem[] = [pageIndex]\n\n  // Here are some variables holding the current state of the parser\n  let shouldIndexContent = hasExcerpt || indexContent\n  let sectionIndex: PageIndexItem | SectionIndexItem | null = null\n  let indexedText = ''\n  let foundFirstHeader = false\n\n  const addTextToIndex = (): void => {\n    if (indexedText && shouldIndexContent) {\n      ;((foundFirstHeader ? sectionIndex! : pageIndex).t ??= []).push(\n        indexedText.replace(/[\\n\\s]+/gu, ' '),\n      )\n      indexedText = ''\n    }\n  }\n\n  const render = (node: AnyNode, preserveSpace = false): void => {\n    if (node.type === 'tag') {\n      if (HEADING_TAGS.includes(node.name)) {\n        const { id } = node.attribs\n        const header = renderHeader(node)\n\n        addTextToIndex()\n\n        // Update current section index only if it has an id\n        if (id) {\n          if (!foundFirstHeader) foundFirstHeader = true\n          else results.push(sectionIndex!)\n\n          sectionIndex = {\n            id: `${pageId}#${id}`,\n            h: header,\n          }\n        } else if (header) {\n          ;((sectionIndex ?? pageIndex).t ??= []).push(header)\n        }\n      } else if (CONTENT_BLOCK_TAGS.includes(node.name)) {\n        addTextToIndex()\n        node.childNodes.forEach((item) => {\n          render(item, preserveSpace || node.name === 'pre')\n        })\n      } else if (CONTENT_INLINE_TAGS.includes(node.name)) {\n        node.childNodes.forEach((item) => {\n          render(item, preserveSpace)\n        })\n      }\n    } else if (node.type === 'text') {\n      indexedText += preserveSpace || node.data.trim() ? node.data : ''\n    } else if (\n      // We are expecting to stop at excerpt marker if content is not indexed\n      hasExcerpt &&\n      !indexContent &&\n      isExcerptMarker(node)\n    ) {\n      shouldIndexContent = false\n    }\n  }\n\n  // The types are not correct, null is returned if contentRendered is empty\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  const nodes = $.parseHTML(contentRendered) ?? []\n\n  // Get custom fields\n  const customFields = fromEntries(\n    customFieldsGetter\n      .map(({ getter }, index) => {\n        const result = getter(page)\n\n        return isArray(result)\n          ? [index.toString(), result]\n          : result\n            ? [index.toString(), [result]]\n            : null\n      })\n      .filter((item): item is [string, string[]] => item !== null),\n  )\n\n  // No content in page and no customFields\n  if (!nodes.length && !keys(customFields).length) return []\n\n  // Walk through nodes and extract indexes\n  nodes.forEach((node) => {\n    render(node)\n  })\n\n  // Push contents in last block tags\n  addTextToIndex()\n\n  // Push last section\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  if (sectionIndex) results.push(sectionIndex)\n\n  // Add custom fields\n  entries(customFields).forEach(([customField, values]) => {\n    results.push({\n      id: `${pageId}@${customField}`,\n      c: values,\n    })\n  })\n\n  return results\n}\n\nexport const getSearchIndexStore = async (\n  app: App,\n  {\n    customFields,\n    indexContent,\n    filter = (): boolean => true,\n    indexOptions,\n    indexLocaleOptions,\n  }: SlimSearchPluginOptions,\n  store: PathStore,\n): Promise<SearchIndexStore> => {\n  const indexesByLocale: LocaleIndex = {}\n\n  app.pages.forEach((page) => {\n    if (filter(page) && page.frontmatter.search !== false)\n      (indexesByLocale[page.pathLocale] ??= []).push(\n        ...generatePageIndex(page, store, customFields, indexContent),\n      )\n  })\n\n  const searchIndex: SearchIndexStore = {}\n\n  await Promise.all(\n    entries(indexesByLocale).map(async ([localePath, indexes]) => {\n      const index = createIndex<string, IndexItem, IndexItem>({\n        ...indexOptions,\n        ...indexLocaleOptions?.[localePath],\n        fields: [/** Heading */ 'h', /** Text */ 't', /** CustomFields */ 'c'],\n        storeFields: [\n          /** Heading */ 'h',\n          /** Anchor */ 'a',\n          /** Text */ 't',\n          /** CustomFields */ 'c',\n        ],\n      })\n\n      await addAllAsync(index, indexes)\n\n      searchIndex[localePath] = index\n    }),\n  )\n\n  return searchIndex\n}\n","import { Logger, ensureEndingSlash } from '@vuepress/helper'\nimport { getDirname, path } from 'vuepress/utils'\n\nconst __dirname = getDirname(import.meta.url)\n\nexport const PLUGIN_NAME = '@vuepress/plugin-slimsearch'\n\nexport const logger = new Logger(PLUGIN_NAME)\n\nexport const CLIENT_FOLDER = ensureEndingSlash(\n  path.resolve(__dirname, '../client/'),\n)\n\nexport const WORKER_FILE = path.resolve(__dirname, '../worker/index.js')\n\nexport const getLocaleChunkName = (locale: string): string =>\n  locale.replace(/\\//g, '') || 'root'\n\nexport const inferFilePath = (vuePath: string): string =>\n  vuePath\n    .replace(/^pages\\//, '')\n    .replace(/\\/index\\.html\\.vue/, '/README.md')\n    .replace(/\\.html\\.vue/, '.md')\n","import type { App } from 'vuepress/core'\nimport { fs, path } from 'vuepress/utils'\n\nimport type { SearchIndexStore } from '../shared/index.js'\nimport type { SlimSearchPluginOptions } from './options.js'\nimport { WORKER_FILE } from './utils.js'\n\nexport const generateWorker = async (\n  app: App,\n  options: SlimSearchPluginOptions,\n  searchStore: SearchIndexStore,\n): Promise<void> => {\n  const workerFilePath = app.dir.dest(options.worker ?? 'slimsearch.worker.js')\n  const searchIndexContent = JSON.stringify(searchStore)\n\n  const workerFileContent = await fs.readFile(WORKER_FILE, 'utf8')\n\n  await fs.ensureDir(path.dirname(workerFilePath))\n  await fs.writeFile(\n    workerFilePath,\n    workerFileContent\n      .replace('__SLIMSEARCH_INDEX__', () => JSON.stringify(searchIndexContent))\n      .replace(\n        '__SLIMSEARCH_SORT_STRATEGY__',\n        JSON.stringify(options.sortStrategy ?? 'max'),\n      ),\n  )\n}\n","import type { SlimSearchLocaleConfig } from '../shared/index.js'\n\n/** Multi language config for slimsearch popup */\nexport const locales: SlimSearchLocaleConfig = {\n  '/en/': {\n    cancel: 'Cancel',\n    placeholder: 'Search',\n    search: 'Search',\n    searching: 'Searching',\n    defaultTitle: 'Documentation',\n    select: 'to select',\n    navigate: 'to navigate',\n    autocomplete: 'to autocomplete',\n    exit: 'to exit',\n    queryHistory: 'Search History',\n    resultHistory: 'Result History',\n    emptyHistory: 'Empty Search History',\n    emptyResult: 'No results found',\n    loading: 'Loading search indexes...',\n  },\n\n  '/zh/': {\n    cancel: 'å–æ¶ˆ',\n    placeholder: 'æœç´¢',\n    search: 'æœç´¢',\n    searching: 'æœç´¢ä¸­',\n    defaultTitle: 'æ–‡æ¡£',\n    select: 'é€‰æ‹©',\n    navigate: 'åˆ‡æ¢',\n    autocomplete: 'è‡ªåŠ¨è¡¥å…¨',\n    exit: 'å…³é—­',\n    queryHistory: 'æœç´¢åŽ†å²',\n    resultHistory: 'åŽ†å²ç»“æžœ',\n    emptyHistory: 'æ— æœç´¢åŽ†å²',\n    emptyResult: 'æ²¡æœ‰æ‰¾åˆ°ç»“æžœ',\n    loading: 'æ­£åœ¨åŠ è½½æœç´¢ç´¢å¼•...',\n  },\n\n  '/zh-tw/': {\n    cancel: 'å–æ¶ˆ',\n    placeholder: 'æœç´¢',\n    search: 'æœç´¢',\n    searching: 'æœç´¢ä¸­',\n    defaultTitle: 'æ–‡æª”',\n    select: 'é¸æ“‡',\n    navigate: 'åˆ‡æ›',\n    autocomplete: 'è‡ªå‹•è£œå…¨',\n    exit: 'é—œé–‰',\n    queryHistory: 'æœç´¢æ­·å²',\n    resultHistory: 'æ­·å²çµæžœ',\n    emptyHistory: 'ç„¡æœç´¢æ­·å²',\n    emptyResult: 'æ²’æœ‰æ‰¾åˆ°çµæžœ',\n    loading: 'æ­£åœ¨åŠ è¼‰æœç´¢ç´¢å¼•...',\n  },\n\n  '/de/': {\n    cancel: 'Abbrechen',\n    placeholder: 'Suche',\n    search: 'Suche',\n    searching: 'Suche',\n    defaultTitle: 'Dokumentation',\n    select: 'auswÃ¤hlen',\n    navigate: 'wechseln',\n    autocomplete: 'automatisch vervollstÃ¤ndigen',\n    exit: 'schlieÃŸen',\n    queryHistory: 'Suchverlauf',\n    resultHistory: 'Ergebnisverlauf',\n    emptyHistory: 'Suchverlauf leeren',\n    emptyResult: 'Keine Ergebnisse gefunden',\n    loading: 'Suchindex wird geladen...',\n  },\n\n  '/de-at/': {\n    cancel: 'Abbrechen',\n    placeholder: 'Suche',\n    search: 'Suche',\n    searching: 'Suche',\n    defaultTitle: 'Dokumentation',\n    select: 'auswÃ¤hlen',\n    navigate: 'wechseln',\n    autocomplete: 'automatisch vervollstÃ¤ndigen',\n    exit: 'schlieÃŸen',\n    queryHistory: 'Suchverlauf',\n    resultHistory: 'Ergebnisverlauf',\n    emptyHistory: 'Suchverlauf leeren',\n    emptyResult: 'Keine Ergebnisse gefunden',\n    loading: 'Suchindex wird geladen...',\n  },\n\n  '/vi/': {\n    cancel: 'Há»§y',\n    placeholder: 'TÃ¬m kiáº¿m',\n    search: 'TÃ¬m kiáº¿m',\n    searching: 'Äang tÃ¬m kiáº¿m',\n    defaultTitle: 'TÃ i liá»‡u',\n    select: 'chá»n',\n    navigate: 'chuyá»ƒn',\n    autocomplete: 'tá»± Ä‘á»™ng hoÃ n thÃ nh',\n    exit: 'Ä‘Ã³ng',\n    queryHistory: 'Lá»‹ch sá»­ tÃ¬m kiáº¿m',\n    resultHistory: 'Lá»‹ch sá»­ káº¿t quáº£',\n    emptyHistory: 'XÃ³a lá»‹ch sá»­ tÃ¬m kiáº¿m',\n    emptyResult: 'KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£',\n    loading: 'Äang táº£i chá»‰ má»¥c tÃ¬m kiáº¿m...',\n  },\n\n  '/uk/': {\n    cancel: 'Ð¡ÐºÐ°ÑÑƒÐ²Ð°Ñ‚Ð¸',\n    placeholder: 'ÐŸÐ¾ÑˆÑƒÐº',\n    search: 'ÐŸÐ¾ÑˆÑƒÐº',\n    searching: 'ÐŸÐ¾ÑˆÑƒÐº',\n    defaultTitle: 'Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ñ–Ñ',\n    select: 'Ð²Ð¸Ð±Ñ€Ð°Ñ‚Ð¸',\n    navigate: 'Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸',\n    autocomplete: 'Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿Ð¾Ð²Ð½ÐµÐ½Ð½Ñ',\n    exit: 'Ð·Ð°ÐºÑ€Ð¸Ñ‚Ð¸',\n    queryHistory: 'Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð¿Ð¾ÑˆÑƒÐºÑƒ',\n    resultHistory: 'Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ–Ð²',\n    emptyHistory: 'ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚Ð¸ Ñ–ÑÑ‚Ð¾Ñ€Ñ–ÑŽ Ð¿Ð¾ÑˆÑƒÐºÑƒ',\n    emptyResult: 'ÐÑ–Ñ‡Ð¾Ð³Ð¾ Ð½Ðµ Ð·Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾',\n    loading: 'Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ Ð¿Ð¾ÑˆÑƒÐºÐ¾Ð²Ð¸Ñ… Ñ–Ð½Ð´ÐµÐºÑÑ–Ð²...',\n  },\n\n  '/ru/': {\n    cancel: 'ÐžÑ‚Ð¼ÐµÐ½Ð°',\n    placeholder: 'ÐŸÐ¾Ð¸ÑÐº',\n    search: 'ÐŸÐ¾Ð¸ÑÐº',\n    searching: 'ÐŸÐ¾Ð¸ÑÐº',\n    defaultTitle: 'Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ',\n    select: 'Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ',\n    navigate: 'Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ',\n    autocomplete: 'Ð°Ð²Ñ‚Ð¾Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ',\n    exit: 'Ð·Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ',\n    queryHistory: 'Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾Ð¸ÑÐºÐ°',\n    resultHistory: 'Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²',\n    emptyHistory: 'ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ Ð¸ÑÑ‚Ð¾Ñ€Ð¸ÑŽ Ð¿Ð¾Ð¸ÑÐºÐ°',\n    emptyResult: 'ÐÐ¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾',\n    loading: 'Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ð¾Ð¸ÑÐºÐ¾Ð²Ñ‹Ñ… Ð¸Ð½Ð´ÐµÐºÑÐ¾Ð²...',\n  },\n\n  '/br/': {\n    cancel: 'Cancelar',\n    placeholder: 'Pesquisar',\n    search: 'Pesquisar',\n    searching: 'Pesquisando',\n    defaultTitle: 'DocumentaÃ§Ã£o',\n    select: 'selecionar',\n    navigate: 'navegar',\n    autocomplete: 'autocompletar',\n    exit: 'fechar',\n    queryHistory: 'HistÃ³rico de pesquisa',\n    resultHistory: 'HistÃ³rico de resultados',\n    emptyHistory: 'Limpar histÃ³rico de pesquisa',\n    emptyResult: 'Nenhum resultado encontrado',\n    loading: 'Carregando Ã­ndices de pesquisa...',\n  },\n\n  '/pl/': {\n    cancel: 'Anuluj',\n    placeholder: 'Szukaj',\n    search: 'Szukaj',\n    searching: 'Szukanie',\n    defaultTitle: 'Dokumentacja',\n    select: 'wybierz',\n    navigate: 'przejdÅº',\n    autocomplete: 'autouzupeÅ‚nianie',\n    exit: 'zamknij',\n    queryHistory: 'Historia wyszukiwania',\n    resultHistory: 'Historia wynikÃ³w',\n    emptyHistory: 'WyczyÅ›Ä‡ historiÄ™ wyszukiwania',\n    emptyResult: 'Nie znaleziono wynikÃ³w',\n    loading: 'Åadowanie indeksÃ³w wyszukiwania...',\n  },\n\n  '/sk/': {\n    cancel: 'ZruÅ¡iÅ¥',\n    placeholder: 'HÄ¾adaÅ¥',\n    search: 'HÄ¾adaÅ¥',\n    searching: 'HÄ¾adanie',\n    defaultTitle: 'DokumentÃ¡cia',\n    select: 'vybraÅ¥',\n    navigate: 'prepnÃºÅ¥',\n    autocomplete: 'automatickÃ© dopÄºÅˆanie',\n    exit: 'zavrieÅ¥',\n    queryHistory: 'HistÃ³ria vyhÄ¾adÃ¡vania',\n    resultHistory: 'HistÃ³ria vÃ½sledkov',\n    emptyHistory: 'VymazaÅ¥ histÃ³riu vyhÄ¾adÃ¡vania',\n    emptyResult: 'NenaÅ¡li sa Å¾iadne vÃ½sledky',\n    loading: 'NaÄÃ­tavajÃº sa vyhÄ¾adÃ¡vacie indexy...',\n  },\n\n  '/fr/': {\n    cancel: 'Annuler',\n    placeholder: 'Rechercher',\n    search: 'Rechercher',\n    searching: 'Recherche',\n    defaultTitle: 'Documentation',\n    select: 'sÃ©lectionner',\n    navigate: 'naviguer',\n    autocomplete: 'auto-complÃ©tion',\n    exit: 'fermer',\n    queryHistory: 'Historique de recherche',\n    resultHistory: 'Historique des rÃ©sultats',\n    emptyHistory: \"Vider l'historique de recherche\",\n    emptyResult: 'Aucun rÃ©sultat trouvÃ©',\n    loading: 'Chargement des index de recherche...',\n  },\n\n  '/es/': {\n    cancel: 'Cancelar',\n    placeholder: 'Buscar',\n    search: 'Buscar',\n    searching: 'Buscando',\n    defaultTitle: 'DocumentaciÃ³n',\n    select: 'seleccionar',\n    navigate: 'navegar',\n    autocomplete: 'autocompletar',\n    exit: 'cerrar',\n    queryHistory: 'Historial de bÃºsqueda',\n    resultHistory: 'Historial de resultados',\n    emptyHistory: 'Vaciar historial de bÃºsqueda',\n    emptyResult: 'No se encontraron resultados',\n    loading: 'Cargando Ã­ndices de bÃºsqueda...',\n  },\n\n  '/ja/': {\n    cancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',\n    placeholder: 'æ¤œç´¢',\n    search: 'æ¤œç´¢',\n    searching: 'æ¤œç´¢ä¸­',\n    defaultTitle: 'ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ',\n    select: 'é¸æŠž',\n    navigate: 'åˆ‡ã‚Šæ›¿ãˆ',\n    autocomplete: 'ã‚ªãƒ¼ãƒˆã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆ',\n    exit: 'é–‰ã˜ã‚‹',\n    queryHistory: 'æ¤œç´¢å±¥æ­´',\n    resultHistory: 'çµæžœå±¥æ­´',\n    emptyHistory: 'æ¤œç´¢å±¥æ­´ã‚’ã‚¯ãƒªã‚¢',\n    emptyResult: 'çµæžœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',\n    loading: 'æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...',\n  },\n\n  '/tr/': {\n    cancel: 'Ä°ptal',\n    placeholder: 'Ara',\n    search: 'Ara',\n    searching: 'AranÄ±yor',\n    defaultTitle: 'DÃ¶kÃ¼mantasyon',\n    select: 'seÃ§',\n    navigate: 'geÃ§',\n    autocomplete: 'otomatik tamamlama',\n    exit: 'kapat',\n    queryHistory: 'Arama geÃ§miÅŸi',\n    resultHistory: 'SonuÃ§ geÃ§miÅŸi',\n    emptyHistory: 'Arama geÃ§miÅŸini temizle',\n    emptyResult: 'SonuÃ§ bulunamadÄ±',\n    loading: 'Arama dizinleri yÃ¼kleniyor...',\n  },\n\n  '/ko/': {\n    cancel: 'ì·¨ì†Œ',\n    placeholder: 'ê²€ìƒ‰',\n    search: 'ê²€ìƒ‰',\n    searching: 'ê²€ìƒ‰ ì¤‘',\n    defaultTitle: 'ë¬¸ì„œ',\n    select: 'ì„ íƒ',\n    navigate: 'ì´ë™',\n    autocomplete: 'ìžë™ ì™„ì„±',\n    exit: 'ë‹«ê¸°',\n    queryHistory: 'ê²€ìƒ‰ ê¸°ë¡',\n    resultHistory: 'ê²°ê³¼ ê¸°ë¡',\n    emptyHistory: 'ê²€ìƒ‰ ê¸°ë¡ ì§€ìš°ê¸°',\n    emptyResult: 'ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',\n    loading: 'ê²€ìƒ‰ ì¸ë±ìŠ¤ë¥¼ ë¡œë“œí•˜ëŠ” ì¤‘...',\n  },\n\n  '/fi/': {\n    cancel: 'Peruuta',\n    placeholder: 'Etsi',\n    search: 'Etsi',\n    searching: 'EtsitÃ¤Ã¤n',\n    defaultTitle: 'Dokumentaatio',\n    select: 'valitaksesi',\n    navigate: 'navigoidaksesi',\n    autocomplete: 'automaattinen tÃ¤ydennys',\n    exit: 'poistuaksesi',\n    queryHistory: 'Hakuhistoria',\n    resultHistory: 'Tuloshistoria',\n    emptyHistory: 'TyhjennÃ¤ hakuhistoria',\n    emptyResult: 'Tuloksia ei lÃ¶ytynyt',\n    loading: 'Ladataan hakuindeksiÃ¤...',\n  },\n\n  '/hu/': {\n    cancel: 'MÃ©gse',\n    placeholder: 'KeresÃ©s',\n    search: 'KeresÃ©s',\n    searching: 'KeresÃ©s',\n    defaultTitle: 'DokumentÃ¡ciÃ³',\n    select: 'kivÃ¡lasztÃ¡shoz',\n    navigate: 'navigÃ¡lÃ¡shoz',\n    autocomplete: 'automatikus kiegÃ©szÃ­tÃ©s',\n    exit: 'kilÃ©pÃ©shez',\n    queryHistory: 'KeresÃ©si elÅ‘zmÃ©nyek',\n    resultHistory: 'EredmÃ©nyek elÅ‘zmÃ©nyei',\n    emptyHistory: 'Ãœres keresÃ©si elÅ‘zmÃ©nyek',\n    emptyResult: 'Nincs talÃ¡lat',\n    loading: 'A keresÃ©si indexek betÃ¶ltÃ©se...',\n  },\n\n  '/id/': {\n    cancel: 'Batal',\n    placeholder: 'Cari sesuatu ðŸ”Ž',\n    search: 'Cari',\n    searching: 'Sedang mencari',\n    defaultTitle: 'Dokumentasi',\n    select: 'pilih',\n    navigate: 'navigasi',\n    autocomplete: 'autoselesai',\n    exit: 'keluar',\n    queryHistory: 'Riwayat Penelusuran',\n    resultHistory: 'Riwayat Hasil',\n    emptyHistory: 'Tidak ada riwayat penelusuran',\n    emptyResult: 'Hasil penelusuran tidak tersedia',\n    loading: 'Memuat indeks penelusuran...',\n  },\n\n  '/nl/': {\n    cancel: 'Annuleren',\n    placeholder: 'Zoeken',\n    search: 'Zoeken',\n    searching: 'Zoeken',\n    defaultTitle: 'Documentatie',\n    select: 'Selecteren',\n    navigate: 'to navigate',\n    autocomplete: 'autocompletion',\n    exit: 'to exit',\n    queryHistory: 'Zoekgeschiedenis',\n    resultHistory: 'Resultaatgeschiedenis',\n    emptyHistory: 'Zoekgeschiedenis Leegmaken',\n    emptyResult: 'Geen resultaten gevonden',\n    loading: 'Laden van zoekindexen...',\n  },\n}\n","export class PathStore {\n  private store: string[]\n\n  public constructor() {\n    this.store = []\n  }\n\n  public addPath(item: string): number {\n    const index = this.store.indexOf(item)\n\n    if (index === -1) {\n      this.store.push(item)\n\n      return this.store.length - 1\n    }\n\n    return index\n  }\n\n  public addPaths(items: string[]): number[] {\n    return items.map((item) => this.addPath(item))\n  }\n\n  public deletePath(item: string): void {\n    const index = this.store.indexOf(item)\n\n    if (index !== -1) this.store[index] = ''\n  }\n\n  public clear(): void {\n    this.store = []\n  }\n\n  public toJSON(): string {\n    return JSON.stringify(this.store)\n  }\n}\n","import { entries, keys } from '@vuepress/helper'\nimport { addAll, discard, vacuum } from 'slimsearch'\nimport type { App } from 'vuepress/core'\n\nimport type { PageIndexId, SearchIndexStore } from '../shared/index.js'\nimport { generatePageIndex } from './generateIndex.js'\nimport type { SlimSearchPluginOptions } from './options.js'\nimport type { PathStore } from './pathStore.js'\nimport { getLocaleChunkName, inferFilePath } from './utils.js'\n\nexport const prepareStore = async (\n  app: App,\n  store: PathStore,\n): Promise<void> => {\n  await app.writeTemp(\n    `slimsearch/store.js`,\n    `\\\nexport const store = ${store.toJSON()};\n`,\n  )\n}\n\nexport const prepareSearchIndex = async (\n  app: App,\n  searchIndexStore: SearchIndexStore,\n): Promise<void> => {\n  await Promise.all(\n    entries(searchIndexStore).map(([locale, documents]) =>\n      app.writeTemp(\n        `slimsearch/${getLocaleChunkName(locale)}.js`,\n        `export default ${JSON.stringify(JSON.stringify(documents))};`,\n      ),\n    ),\n  )\n\n  await app.writeTemp(\n    `slimsearch/index.js`,\n    `export default {${keys(searchIndexStore)\n      .map(\n        (locale) =>\n          `${JSON.stringify(locale)}: () => import('./${getLocaleChunkName(\n            locale,\n          )}.js')`,\n      )\n      .join(',')}}`,\n  )\n}\n\nexport const updateSearchIndex = async (\n  app: App,\n  options: SlimSearchPluginOptions,\n  searchIndexStore: SearchIndexStore,\n  store: PathStore,\n  path: string,\n): Promise<void> => {\n  const filePath = inferFilePath(path)\n\n  const page = app.pages.find(\n    ({ filePathRelative }) =>\n      filePathRelative?.toLowerCase() === filePath.toLowerCase(),\n  )\n\n  if (page) {\n    const pageIndexes = generatePageIndex(\n      page,\n      store,\n      options.customFields,\n      options.indexContent,\n    )\n    const { pathLocale } = page\n    const pageId = store.addPath(page.path).toString() as PageIndexId\n    const localeSearchIndex = searchIndexStore[pathLocale]\n\n    // Update index\n    // Remove previous index\n    Array.from(localeSearchIndex._documentIds.values())\n      .filter((id) => id.startsWith(pageId))\n      .forEach((id) => {\n        discard(localeSearchIndex, id)\n      })\n\n    addAll(localeSearchIndex, pageIndexes)\n\n    await vacuum(localeSearchIndex)\n\n    // Search index file content\n    const content = `\\\nexport default ${JSON.stringify(JSON.stringify(localeSearchIndex))}\n`\n\n    await app.writeTemp(\n      `slimsearch/${getLocaleChunkName(pathLocale)}.js`,\n      content,\n    )\n  }\n}\n\nexport const removeSearchIndex = async (\n  app: App,\n  searchIndexStore: SearchIndexStore,\n  store: PathStore,\n  path: string,\n): Promise<void> => {\n  const filePath = inferFilePath(path)\n\n  const page = app.pages.find(\n    ({ filePathRelative }) =>\n      filePathRelative?.toLowerCase() === filePath.toLowerCase(),\n  )\n\n  if (page) {\n    const { pathLocale } = page\n    const pageId = store.addPath(page.path).toString() as PageIndexId\n    const localeSearchIndex = searchIndexStore[pathLocale]\n\n    // Remove previous index\n    Array.from(localeSearchIndex._documentIds.values())\n      .filter((id) => id.startsWith(pageId))\n      .forEach((id) => {\n        discard(localeSearchIndex, id)\n      })\n\n    await vacuum(localeSearchIndex)\n\n    // Search index file content\n    const content = `\\\nexport default ${JSON.stringify(JSON.stringify(localeSearchIndex))}\n`\n\n    await app.writeTemp(\n      `slimsearch/${getLocaleChunkName(pathLocale)}.js`,\n      content,\n    )\n  }\n}\n","import { getPageExcerpt } from '@vuepress/helper'\nimport type { App, Page } from 'vuepress/core'\n\nexport const setPagesExcerpt = (app: App): void => {\n  const { pages, pluginApi } = app\n  const isBlogPluginEnabled = pluginApi.plugins.some(\n    ({ name }) => name === '@vuepress/plugin-blog',\n  )\n  const hasExcerpt =\n    isBlogPluginEnabled || pages.some((page) => 'excerpt' in page.data)\n\n  if (!hasExcerpt)\n    pages.forEach(\n      (page: Page<Record<string, unknown> & { excerpt?: string }>) => {\n        page.data.excerpt = getPageExcerpt(app, page, {\n          length: 300,\n        })\n      },\n    )\n}\n","import {\n  addViteOptimizeDepsInclude,\n  addViteSsrNoExternal,\n  fromEntries,\n  getLocaleConfig,\n} from '@vuepress/helper'\nimport { watch } from 'chokidar'\nimport type { PluginFunction } from 'vuepress/core'\n\nimport type { SearchIndexStore } from '../shared/index.js'\nimport { getSearchIndexStore } from './generateIndex.js'\nimport { generateWorker } from './generateWorker.js'\nimport { locales } from './locales.js'\nimport type { SlimSearchPluginOptions } from './options.js'\nimport { PathStore } from './pathStore.js'\nimport {\n  prepareSearchIndex,\n  prepareStore,\n  removeSearchIndex,\n  updateSearchIndex,\n} from './prepare.js'\nimport { setPagesExcerpt } from './setPagesExcerpt.js'\nimport { CLIENT_FOLDER, PLUGIN_NAME, logger } from './utils.js'\n\nexport const slimsearchPlugin =\n  (options: SlimSearchPluginOptions = {}): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options:', options)\n\n    const store = new PathStore()\n    let searchIndexStore: SearchIndexStore | null = null\n\n    return {\n      name: PLUGIN_NAME,\n\n      define: {\n        __SLIMSEARCH_AUTO_SUGGESTIONS__: options.autoSuggestions ?? true,\n        __SLIMSEARCH_CUSTOM_FIELDS__: fromEntries(\n          options.customFields\n            ?.map(({ formatter }, index) =>\n              formatter ? [index.toString(), formatter] : null,\n            )\n            .filter((item): item is [string, string] => item !== null) ?? [],\n        ),\n        __SLIMSEARCH_LOCALES__: getLocaleConfig({\n          app,\n          name: PLUGIN_NAME,\n          config: options.locales,\n          default: locales,\n        }),\n        __SLIMSEARCH_OPTIONS__: {\n          searchDelay: options.searchDelay ?? 150,\n          suggestDelay: options.suggestDelay ?? 0,\n          queryHistoryCount: options.queryHistoryCount ?? 5,\n          resultHistoryCount: options.resultHistoryCount ?? 5,\n          hotKeys: options.hotKeys ?? [\n            { key: 'k', ctrl: true },\n            { key: '/', ctrl: true },\n          ],\n          worker: options.worker ?? 'slimsearch.worker.js',\n        },\n        __SLIMSEARCH_SORT_STRATEGY__: JSON.stringify(\n          options.sortStrategy ?? 'max',\n        ),\n      },\n\n      clientConfigFile: `${CLIENT_FOLDER}config.js`,\n\n      extendsBundlerOptions: (bundlerOptions: unknown): void => {\n        addViteOptimizeDepsInclude(bundlerOptions, app, 'slimsearch', true)\n        addViteSsrNoExternal(bundlerOptions, app, [\n          '@vuepress/helper',\n          'fflate',\n          'vuepress-shared',\n        ])\n      },\n\n      onInitialized: async (): Promise<void> => {\n        setPagesExcerpt(app)\n        searchIndexStore = await getSearchIndexStore(app, options, store)\n      },\n\n      onPrepared: async (): Promise<void> => {\n        if (app.env.isDev) await prepareSearchIndex(app, searchIndexStore!)\n        await prepareStore(app, store)\n        // clean store in build to save memory\n        if (app.env.isBuild) store.clear()\n      },\n\n      onWatched: (_, watchers): void => {\n        const hotReload = options.hotReload ?? app.env.isDebug\n\n        if (hotReload) {\n          // This ensure the page is generated or updated\n          const searchIndexWatcher = watch('pages/**/*.vue', {\n            cwd: app.dir.temp(),\n            ignoreInitial: true,\n          })\n\n          searchIndexWatcher.on('add', (path) => {\n            void updateSearchIndex(app, options, searchIndexStore!, store, path)\n          })\n          searchIndexWatcher.on('change', (path) => {\n            void updateSearchIndex(app, options, searchIndexStore!, store, path)\n          })\n          searchIndexWatcher.on('unlink', (path) => {\n            void removeSearchIndex(app, searchIndexStore!, store, path)\n          })\n\n          watchers.push(searchIndexWatcher)\n        }\n      },\n\n      onGenerated: () => generateWorker(app, options, searchIndexStore!),\n    }\n  }\n","import type { SearchIndex } from 'slimsearch'\n\nexport const enum IndexField {\n  Heading = 'h',\n  Anchor = 'a',\n  Text = 't',\n  CustomFields = 'c',\n}\n\nexport type PageIndexId = `${number}`\n\nexport interface PageIndexItem {\n  id: PageIndexId\n  /** Heading */ h: string\n  /** Text */ t?: string[]\n}\n\nexport type SectionIndexId = `${PageIndexId}#${string}`\n\nexport interface SectionIndexItem {\n  id: SectionIndexId\n  /** Heading */ h: string\n  /** Text */ t?: string[]\n}\n\nexport type CustomFieldIndexID = `${PageIndexId}@${number}`\n\nexport interface CustomFieldIndexItem {\n  id: string\n  /** CustomFields */ c: string[]\n}\n\nexport type IndexItem = CustomFieldIndexItem | PageIndexItem | SectionIndexItem\n\nexport type LocaleIndex = Record<string, IndexItem[]>\n\nexport type SearchIndexStore = Record<\n  string,\n  SearchIndex<string, IndexItem, IndexItem>\n>\n"],"names":["HEADING_TAGS","CONTENT_BLOCK_TAGS","CONTENT_INLINE_TAGS","isExcerptMarker","node","$","load","renderHeader","childNode","generatePageIndex","page","store","customFieldsGetter","indexContent","contentRendered","data","title","pageId","hasExcerpt","pageIndex","results","shouldIndexContent","sectionIndex","indexedText","foundFirstHeader","addTextToIndex","render","preserveSpace","id","header","item","nodes","customFields","fromEntries","getter","index","result","isArray","keys","entries","customField","values","getSearchIndexStore","app","filter","indexOptions","indexLocaleOptions","indexesByLocale","searchIndex","localePath","indexes","createIndex","addAllAsync","__dirname","getDirname","PLUGIN_NAME","logger","Logger","CLIENT_FOLDER","ensureEndingSlash","path","WORKER_FILE","getLocaleChunkName","locale","inferFilePath","vuePath","generateWorker","options","searchStore","workerFilePath","searchIndexContent","workerFileContent","fs","locales","PathStore","items","prepareStore","prepareSearchIndex","searchIndexStore","documents","updateSearchIndex","filePath","filePathRelative","pageIndexes","pathLocale","localeSearchIndex","discard","addAll","vacuum","content","removeSearchIndex","setPagesExcerpt","pages","pluginApi","name","getPageExcerpt","slimsearchPlugin","formatter","getLocaleConfig","bundlerOptions","addViteOptimizeDepsInclude","addViteSsrNoExternal","_","watchers","searchIndexWatcher","watch","IndexField"],"mappings":"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"}